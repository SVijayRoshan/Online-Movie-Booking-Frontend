import{r as d,j as e}from"./index-YhsNIgvP.js";import{u as g,H as h}from"./Header-CL76FjJX.js";import{a as j}from"./button-Duyd6bEY.js";import{S as v,a as f,b,c as N,d as c,M as w}from"./select-BoNfSg7w.js";import{I as y}from"./input-BxC0n9rW.js";import"./card-CfP9Vloi.js";import"./badge-BNxsIBJT.js";import"./star-DM4Z64dp.js";import"./index-umRYUILS.js";import"./Combination-BY_svM0-.js";import"./index-CEcT7utf.js";import"./index-Bwx7h8AJ.js";function q(){const{data:i,isLoading:m}=g({queryKey:["/api/movies"],queryFn:()=>j.getMovies()}),[t,n]=d.useState(""),[r,x]=d.useState("popular"),u=d.useMemo(()=>{let a=i||[];return t&&(a=a.filter(l=>l.title.toLowerCase().includes(t.toLowerCase()))),r==="popular"?a=[...a].sort((l,o)=>o.rating-l.rating):r==="az"&&(a=[...a].sort((l,o)=>l.title.localeCompare(o.title))),a},[i,t,r]);function p(s){try{const a=new URL(s).hostname;return a==="upload.wikimedia.org"||a==="static.wikia.nocookie.net"||a==="image.tmdb.org"||a==="m.media-amazon.com"?`/api/proxy?url=${encodeURIComponent(s)}`:s}catch{return s}}return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(h,{}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-48 md:h-64 overflow-hidden bg-muted",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/60 to-transparent z-10"}),e.jsx("div",{className:"grid grid-cols-5 gap-1 opacity-60",children:(i||[]).slice(0,15).map(s=>e.jsx("img",{src:p(s.posterUrl),alt:s.title,className:"w-full h-48 md:h-64 object-cover"},s.id))})]}),e.jsx("div",{className:"absolute inset-0 flex items-end z-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 pb-4 w-full",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-display",children:"All Movies"})})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-end mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsx(y,{value:t,onChange:s=>n(s.target.value),placeholder:"Search movies..."})]}),e.jsxs("div",{className:"w-full md:w-52",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),e.jsxs(v,{value:r,onValueChange:x,children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(N,{children:[e.jsx(c,{value:"popular",children:"Most Popular"}),e.jsx(c,{value:"az",children:"A â†’ Z"})]})]})]})]}),m?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:Array.from({length:10}).map((s,a)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-[2/3] bg-muted rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]},a))}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:u.map(s=>e.jsx(w,{movie:s},s.id))})]})]})}export{q as default};
