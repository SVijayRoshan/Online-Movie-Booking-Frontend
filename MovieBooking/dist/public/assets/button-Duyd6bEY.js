import{c as u,r as m,j as w,a0 as f,a as y,b as k}from"./index-YhsNIgvP.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=u("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),v=["A","B","C","D","E","F","G","H"],b=10;function E(i){const e=[];return v.forEach(t=>{for(let s=1;s<=b;s++)e.push({id:`${t}${s}`,row:t,number:s,state:"available",price:i})}),e}const g=[{id:"E-1",title:"Man of Steel",synopsis:"Clark Kent discovers his origins and becomes Superman to protect Earth from a formidable Kryptonian threat.",posterUrl:"https://image.tmdb.org/t/p/w500/7rIPjn5TUK04O25ZkMyHrGNPgLx.jpg",duration:143,genres:["English","Action","Sci-Fi"],rating:7.1,shows:[]},{id:"E-2",title:"The Dark Knight",synopsis:"Batman faces the Joker, a criminal mastermind who plunges Gotham into chaos.",posterUrl:"https://image.tmdb.org/t/p/w500/1hRoyzDtpgMU7Dz4JF22RANzQO7.jpg",duration:152,genres:["English","Action","Crime"],rating:9,shows:[]},{id:"E-3",title:"Interstellar",synopsis:"A team of explorers travel through a wormhole in space in an attempt to ensure humanity’s survival.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/b/bc/Interstellar_film_poster.jpg",duration:169,genres:["English","Sci-Fi","Adventure"],rating:8.6,shows:[]},{id:"E-4",title:"Titanic",synopsis:"A romance blossoms aboard the ill-fated RMS Titanic.",posterUrl:"https://image.tmdb.org/t/p/w500/9xjZS2rlVxm8SFx8kPC3aIGCOYQ.jpg",duration:194,genres:["English","Drama","Romance"],rating:7.9,shows:[]},{id:"E-5",title:"Avatar",synopsis:"A paraplegic Marine is dispatched to the moon Pandora on a unique mission.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/d/d6/Avatar_%282009_film%29_poster.jpg",duration:162,genres:["English","Sci-Fi","Adventure"],rating:7.8,shows:[]},{id:"A-1",title:"Spirited Away",synopsis:"A young girl enters a world of spirits and must find a way to free her parents.",posterUrl:"https://image.tmdb.org/t/p/w500/39wmItIWsg5sZMyRUHLkWBcuVCM.jpg",duration:125,genres:["Anime","Fantasy","Adventure"],rating:8.6,shows:[]},{id:"A-2",title:"Your Name",synopsis:"Two teenagers share a profound, magical connection upon discovering they are swapping bodies.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/0/0b/Your_Name_poster.png",duration:106,genres:["Anime","Romance","Fantasy"],rating:8.4,shows:[]},{id:"A-3",title:"Demon Slayer: Infinity Castle",synopsis:"Tanjiro and his allies confront Muzan in the Infinity Castle in a climactic battle across shifting domains.",posterUrl:"https://image.tmdb.org/t/p/w500/yF8acglZWjMgmdaJuLIZjdlbTYd.jpg",duration:130,genres:["Anime","Action","Fantasy"],rating:8.2,shows:[]},{id:"E-16",title:"Spider-Man: No Way Home",synopsis:"Peter Parker seeks help from Doctor Strange, but a spell gone wrong opens the multiverse to new threats.",posterUrl:"https://image.tmdb.org/t/p/w500/1g0dhYtq4irTY1GPXvft6k4YLjm.jpg",duration:148,genres:["English","Action","Sci-Fi"],rating:8.2,shows:[]},{id:"E-6",title:"Furious 7",synopsis:"Dominic Toretto and his crew face a new threat from a vengeful special ops assassin.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/b/b8/Furious_7_poster.jpg",duration:137,genres:["English","Action","Thriller"],rating:7.1,shows:[]},{id:"E-7",title:"Cars",synopsis:"Lightning McQueen learns that life is about the journey, not just the finish line.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/3/34/Cars_2006.jpg",duration:117,genres:["English","Animation","Family"],rating:7.2,shows:[]},{id:"E-8",title:"The Matrix",synopsis:"A hacker discovers the true nature of reality and his role in the war against its controllers.",posterUrl:"https://image.tmdb.org/t/p/w500/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg",duration:136,genres:["English","Sci-Fi","Action"],rating:8.7,shows:[]},{id:"E-9",title:"The Godfather",synopsis:"The aging patriarch of an organized crime dynasty transfers control to his reluctant son.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/1/1c/Godfather_ver1.jpg",duration:175,genres:["English","Crime","Drama"],rating:9.2,shows:[]},{id:"E-10",title:"Pulp Fiction",synopsis:"The lives of two mob hitmen, a boxer, and others intertwine in tales of violence and redemption.",posterUrl:"https://image.tmdb.org/t/p/w500/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg",duration:154,genres:["English","Crime","Drama"],rating:8.9,shows:[]},{id:"E-11",title:"Fight Club",synopsis:"An insomniac office worker and a soap maker form an underground fight club.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/f/fc/Fight_Club_poster.jpg",duration:139,genres:["English","Drama"],rating:8.8,shows:[]},{id:"E-12",title:"The Shawshank Redemption",synopsis:"Two imprisoned men bond over years, finding solace and eventual redemption.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/8/81/ShawshankRedemptionMoviePoster.jpg",duration:142,genres:["English","Drama"],rating:9.3,shows:[]},{id:"E-13",title:"Avengers: Endgame",synopsis:"The Avengers assemble once more in order to reverse Thanos’ actions and restore balance.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/0/0d/Avengers_Endgame_poster.jpg",duration:181,genres:["English","Action","Sci-Fi"],rating:8.4,shows:[]},{id:"E-14",title:"Jurassic Park",synopsis:"A preview tour of a theme park with cloned dinosaurs turns deadly.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/e/e7/Jurassic_Park_poster.jpg",duration:127,genres:["English","Adventure","Sci-Fi"],rating:8.2,shows:[]},{id:"E-15",title:"Back to the Future",synopsis:"A teenager travels back in time and must ensure his parents fall in love to save his existence.",posterUrl:"https://upload.wikimedia.org/wikipedia/en/d/d2/Back_to_the_Future.jpg",duration:116,genres:["English","Adventure","Sci-Fi"],rating:8.5,shows:[]},{id:"A-6",title:"One Piece Film: Red",synopsis:"The Straw Hat Pirates attend a music festival where secrets about Shanks unfold.",posterUrl:"https://image.tmdb.org/t/p/w500/ogDXuVkO92GcETZfSofXXemw7gb.jpg",duration:115,genres:["Anime","Adventure","Action"],rating:6.8,shows:[]}],S=["Cineplex Downtown","StarView Mall","Grand Cinema","Metro Theater"],A=new Date,M=Array.from({length:7},(i,e)=>{const t=new Date(A);return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]});g.forEach(i=>{M.forEach(e=>{S.forEach(t=>{["10:00","13:30","17:00","20:30"].forEach(o=>{const n={id:`${i.id}-${e}-${t.replace(/\s/g,"")}-${o.replace(":","")}`,movieId:i.id,theatre:t,date:e,time:o,price:300+Math.floor(Math.random()*500)};i.shows.push(n)})})})});class x{constructor(){this.movies=JSON.parse(JSON.stringify(g)),this.shows=new Map,this.bookings=[],this.users=[],this.userPasswordsByEmail=new Map,this.locks=new Map,this.movies.forEach(e=>{e.shows.forEach(t=>{this.shows.set(t.id,{...t,seatsLayout:E(t.price)})})}),this.users.push({id:"1",email:"demo@example.com",name:"Demo User"}),this.userPasswordsByEmail.set("demo@example.com","password")}async getMovies(){return await this.delay(300),this.movies.map(e=>({...e,shows:e.shows.map(({seatsLayout:t,...s})=>s)}))}async getMovie(e){await this.delay(200);const t=this.movies.find(s=>s.id===e);return t?{...t,shows:t.shows.map(({seatsLayout:s,...o})=>o)}:null}async getShow(e){await this.delay(200),this.cleanExpiredLocks();const t=this.shows.get(e);return t?JSON.parse(JSON.stringify(t)):null}async lockSeats(e,t){await this.delay(400),this.cleanExpiredLocks();const s=this.shows.get(e);if(!s)throw new Error("Show not found");const o=[],n=[];t.seatIds.forEach(d=>{const a=s.seatsLayout.find(p=>p.id===d);a?a.state!=="available"?n.push(d):(a.state="locked",o.push(d)):n.push(d)});const r=`lock_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l=t.holdSeconds||300,c=new Date(Date.now()+l*1e3);return o.length>0&&this.locks.set(r,{seatIds:o,expiresAt:c,showId:e}),{lockToken:r,lockedSeats:o,failedSeats:n,expiresAt:c.toISOString()}}async createBooking(e){await this.delay(500),this.cleanExpiredLocks();const t=this.locks.get(e.lockToken);if(!t)throw new Error("Invalid or expired lock token");if(t.showId!==e.showId)throw new Error("Lock token does not match show");const s=this.shows.get(e.showId);if(!s)throw new Error("Show not found");const o=this.movies.find(d=>d.id===s.movieId);if(e.seatIds.filter(d=>!t.seatIds.includes(d)).length>0)throw new Error("Some seats are not locked with this token");const r=[];let l=0;e.seatIds.forEach(d=>{const a=s.seatsLayout.find(p=>p.id===d);a&&a.state==="locked"&&(a.state="booked",r.push({id:a.id,row:a.row,number:a.number,price:a.price}),l+=a.price)}),this.locks.delete(e.lockToken);const c={id:`booking_${Date.now()}`,userId:e.userId,showId:e.showId,movieTitle:o==null?void 0:o.title,theatre:s.theatre,showDate:s.date,showTime:s.time,seats:r,total:l,createdAt:new Date().toISOString()};return this.bookings.push(c),c}async getBookings(e){return await this.delay(200),this.bookings.filter(t=>t.userId===e)}async login(e,t){await this.delay(300);const s=this.users.find(r=>r.email===e);if(!s)throw new Error("User not found");const o=this.userPasswordsByEmail.get(e);if(!o||o!==t)throw new Error("Invalid email or password");const n=`token_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{user:s,token:n}}async register(e,t,s){if(await this.delay(300),this.users.find(r=>r.email===e))throw new Error("User already exists");if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(e))throw new Error("Invalid email");if((t||"").length<6)throw new Error("Password must be at least 6 characters");const o={id:`user_${Date.now()}`,email:e,name:s};this.users.push(o),this.userPasswordsByEmail.set(e,t);const n=`token_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{user:o,token:n}}async addMovie(e){await this.delay(300);const t={...e,id:`movie_${Date.now()}`,shows:[]};return this.movies.push(t),t}async deleteMovie(e){await this.delay(200);const t=this.movies.findIndex(s=>s.id===e);t!==-1&&this.movies.splice(t,1)}cleanExpiredLocks(){const e=new Date;this.locks.forEach((t,s)=>{if(t.expiresAt<e){const o=this.shows.get(t.showId);o&&t.seatIds.forEach(n=>{const r=o.seatsLayout.find(l=>l.id===n);r&&r.state==="locked"&&(r.state="available")}),this.locks.delete(s)}})}delay(e){return new Promise(t=>setTimeout(t,e))}}const h=new x,T={getMovies:async()=>h.getMovies(),getMovie:async i=>h.getMovie(i),getShow:async i=>h.getShow(i),lockSeats:async(i,e)=>h.lockSeats(i,e),createBooking:async i=>h.createBooking(i),getBookings:async i=>h.getBookings(i),login:async(i,e)=>h.login(i,e),register:async(i,e,t)=>h.register(i,e,t),addMovie:async i=>h.addMovie(i),deleteMovie:async i=>h.deleteMovie(i)},_=k("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),I=m.forwardRef(({className:i,variant:e,size:t,asChild:s=!1,...o},n)=>{const r=s?f:"button";return w.jsx(r,{className:y(_({variant:e,size:t,className:i})),ref:n,...o})});I.displayName="Button";export{I as B,j as F,T as a};
